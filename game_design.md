# 《方块连连消》游戏设计文档

## 1. 游戏界面布局设计

### 1.1 主界面布局
- **顶部区域**：
  - 左侧：玩家头像、等级、名称
  - 中间：游戏Logo
  - 右侧：设置按钮、商店入口
- **中部区域**：
  - 关卡地图（主要内容区）
  - 当前进度指示
  - 未解锁关卡（灰色显示）
- **底部区域**：
  - 社交功能入口（排行榜、好友挑战）
  - 每日任务入口
  - 活动入口

### 1.2 游戏界面布局
- **顶部信息栏**：
  - 左侧：返回按钮、关卡信息
  - 中间：目标进度条/计分板
  - 右侧：剩余步数/时间、暂停按钮
- **游戏区域**：
  - 方块网格（主要游戏区）
  - 连线动画层
  - 特效显示层
- **底部控制区**：
  - 能量槽（左侧）
  - 道具栏（中间）
  - 能量爆发按钮（右侧，仅在能量充满时激活）

### 1.3 结算界面布局
- **胜利界面**：
  - 星级评价（1-3星）
  - 得分统计
  - 奖励展示
  - 下一关按钮、重玩按钮、分享按钮
- **失败界面**：
  - 失败原因提示
  - 目标完成度
  - 复活选项（观看广告）
  - 重玩按钮、返回按钮

### 1.4 商店界面布局
- **顶部导航**：
  - 道具商店、皮肤商店、主题商店标签页
  - 玩家金币/钻石余额显示
- **商品展示区**：
  - 网格布局展示商品
  - 商品卡片（图标、名称、价格、描述）
- **底部区域**：
  - 推荐商品
  - 限时特惠
  - 充值入口

## 2. 方块元素与特效设计

### 2.1 普通方块设计
- **基础形状**：正方形，圆角处理
- **颜色方案**：
  - 红色：#FF5252
  - 蓝色：#448AFF
  - 绿色：#4CAF50
  - 黄色：#FFEB3B
  - 紫色：#9C27B0
  - 青色：#00BCD4
- **纹理设计**：
  - 每种颜色对应不同的简单图案
  - 内部渐变效果增加立体感
  - 轻微发光效果提升视觉吸引力

### 2.2 特殊方块设计
- **炸弹方块**：
  - 基础：深灰色底色
  - 中心：炸弹图标
  - 特效：轻微闪烁动画
- **彩虹方块**：
  - 基础：白色底色
  - 特效：彩虹渐变流动效果
  - 边缘：星星装饰元素
- **直线消除方块**：
  - 基础：银色底色
  - 特效：方向指示箭头
  - 边缘：闪电装饰元素

### 2.3 方块状态与动画
- **待机状态**：
  - 轻微呼吸效果
  - 随机小幅度旋转或缩放
- **选中状态**：
  - 明显放大效果
  - 边缘高亮
  - 脉冲光环
- **消除动画**：
  - 方块破碎效果
  - 颜色粒子爆发
  - 消失前短暂放大

### 2.4 特殊效果设计
- **连线效果**：
  - 样式：与方块同色的光线
  - 动画：从起点到终点的流动光效
  - 宽度：随连接数量增加而增粗
- **消除特效**：
  - 普通消除：简单的闪光和消失
  - 特殊方块消除：更大范围的爆炸效果
  - 连击效果：屏幕轻微震动，连击数字弹出
- **能量爆发特效**：
  - 全屏光芒四射
  - 方块旋转并变大
  - 彩色粒子风暴
  - 屏幕震动效果

## 3. 连线与消除机制设计

### 3.1 连线判定规则
- **基本规则**：
  - 必须连接3个或以上相同颜色的方块
  - 方块必须相邻（水平、垂直或对角线）
  - 连线路径必须是连续的
- **连线方式**：
  - 滑动手指连接方块
  - 连线过程中可以改变方向
  - 不能重复连接已选中的方块
- **连线反馈**：
  - 实时显示连线路径
  - 连线数量达到3个时路径变粗
  - 连线数量增加时有声音提示

### 3.2 消除判定规则
- **基本消除**：
  - 松开手指时，如连接3个以上同色方块则触发消除
  - 消除后，上方方块下落填补空缺
  - 空缺顶部生成新方块
- **特殊消除**：
  - 连接5个以上方块：生成炸弹方块
  - 连接7个以上方块：生成彩虹方块
  - 连接形成"L"或"T"形：生成直线消除方块
- **连锁反应**：
  - 方块下落可能触发新的匹配
  - 连锁反应提供额外分数奖励
  - 连锁次数越多，奖励越高

### 3.3 特殊方块效果
- **炸弹方块**：
  - 被连接消除时，额外消除周围3x3范围内的方块
  - 不需要匹配颜色即可触发
- **彩虹方块**：
  - 可与任意颜色方块配对
  - 消除时同时消除场上所有与之配对颜色的方块
- **直线消除方块**：
  - 被连接消除时，额外消除一整行或一整列方块
  - 方向取决于最后连接的方向

### 3.4 障碍物设计
- **冰块**：
  - 覆盖在方块上，需要消除覆盖的方块才能破除
  - 可以有多层冰块，每次消除减少一层
- **石块**：
  - 不可移动，需要在其周围消除方块来破坏
  - 需要多次周围消除才能完全破坏
- **锁链**：
  - 连接两个方块，被连接的方块必须同时消除才能解除
  - 锁链方块不能单独移动

## 4. 能量槽系统设计

### 4.1 能量获取机制
- **基础获取**：
  - 每消除一个方块获得1点能量
  - 特殊方块提供额外能量（炸弹2点，彩虹3点）
  - 连击提供额外能量奖励
- **能量加速**：
  - 连续消除提供能量加成
  - 特定关卡可能有能量获取加成
  - 可通过道具或广告临时提升能量获取速率

### 4.2 能量槽UI设计
- **外观**：
  - 位于游戏界面左侧
  - 垂直进度条设计
  - 充能动画：从底部向顶部填充
- **状态指示**：
  - 未充满：蓝色能量流动效果
  - 即将充满（80%以上）：黄色脉冲提示
  - 充满状态：金色闪耀效果，明显的视觉和音效提示

### 4.3 能量爆发效果
- **触发方式**：
  - 能量槽充满后点击能量爆发按钮
  - 按钮位于游戏界面右下角
  - 充满状态下按钮有明显的视觉提示
- **爆发效果等级**：
  - 基础爆发：随机消除30%的方块
  - 高级爆发：消除所有特定颜色的方块
  - 超级爆发：全屏方块重排并创造有利局面

### 4.4 能量爆发动画
- **前奏动画**：
  - 屏幕中心出现能量球
  - 能量球逐渐变大并脉动
  - 方块轻微震动
- **爆发动画**：
  - 能量球爆炸，释放能量波
  - 能量波扫过的方块被消除
  - 屏幕闪烁和震动效果
- **结束动画**：
  - 粒子效果逐渐消散
  - 新方块落下填补空缺
  - 能量槽重置为空

## 5. 关卡目标系统设计

### 5.1 目标类型
- **分数目标**：
  - 在限定步数内达到指定分数
  - 分数目标分为一星、二星、三星三个等级
- **收集目标**：
  - 收集指定数量的特定颜色方块
  - 收集指定数量的特殊方块
- **清除目标**：
  - 清除所有障碍物（冰块、石块等）
  - 清除指定位置的方块
- **组合目标**：
  - 同时满足多个不同类型的目标
  - 目标之间可能有优先级

### 5.2 目标UI设计
- **目标展示区**：
  - 位于游戏界面顶部
  - 图标+数字的形式展示
  - 当前进度/总目标的显示方式
- **目标完成反馈**：
  - 目标项完成时的动画效果
  - 声音反馈
  - 目标完成后的视觉标记

### 5.3 关卡难度设计
- **难度递进**：
  - 初始关卡：简单目标，充分步数
  - 中期关卡：多样目标，适中步数
  - 后期关卡：复杂目标，严格步数限制
- **平衡因素**：
  - 目标数量与难度
  - 步数限制
  - 特殊方块出现概率
  - 障碍物数量与分布

### 5.4 关卡地图设计
- **地图结构**：
  - 线性进阶路径
  - 每10关为一个主题区域
  - 特殊关卡（挑战关）分支
- **视觉表现**：
  - 不同主题区域有独特背景和风格
  - 已完成关卡显示获得的星级
  - 当前可玩关卡有特殊标记
  - 未解锁关卡显示锁定状态

## 6. 道具系统设计

### 6.1 道具类型
- **悔棋道具**：
  - 功能：撤销上一步操作
  - 使用限制：每关最多使用3次
  - 获取方式：每日奖励、商店购买
- **刷新道具**：
  - 功能：重新排列当前所有方块
  - 使用时机：当前局面无可行移动时
  - 获取方式：商店购买、观看广告
- **指定消除道具**：
  - 功能：消除指定方块及周围方块
  - 使用方式：点击道具后再点击目标方块
  - 获取方式：商店购买、特殊活动奖励
- **额外步数道具**：
  - 功能：增加5步移动次数
  - 使用时机：步数用尽但未完成目标时
  - 获取方式：观看广告、商店购买
- **颜色炸弹道具**：
  - 功能：消除场上所有指定颜色的方块
  - 使用方式：点击道具后选择颜色
  - 获取方式：商店高级道具包、VIP奖励

### 6.2 道具UI设计
- **道具栏**：
  - 位置：游戏界面底部中央
  - 布局：水平排列的圆形图标
  - 数量显示：道具图标右上角数字
- **使用反馈**：
  - 点击效果：道具图标放大并弹出使用提示
  - 使用动画：根据道具类型显示相应特效
  - 使用后反馈：道具数量减少，效果应用

### 6.3 道具获取途径
- **每日奖励**：
  - 每日登录奖励包含基础道具
  - 连续登录提供更多道具
- **任务奖励**：
  - 完成每日任务获得道具
  - 成就系统奖励稀有道具
- **商店购买**：
  - 使用金币/钻石购买单个道具
  - 道具礼包提供折扣
- **广告奖励**：
  - 观看广告获得临时道具
  - 特定场景（如失败时）提供广告换道具选项
- **社交获取**：
  - 好友赠送
  - 帮助好友通关获得奖励

### 6.4 道具平衡设计
- **稀有度分级**：
  - 普通道具：悔棋、刷新
  - 稀有道具：指定消除、额外步数
  - 史诗道具：颜色炸弹、全屏消除
- **使用限制**：
  - 每关道具使用次数限制
  - 特定关卡可能禁用某些道具
  - 连续使用同一道具效果递减
- **经济平衡**：
  - 道具价格与效果对应
  - 高级道具获取难度较大
  - 免费获取途径与付费获取的平衡

## 7. 分数计算规则设计

### 7.1 基础分数规则
- **方块基础分**：
  - 普通方块：10分/个
  - 特殊方块：炸弹20分、彩虹30分、直线消除25分
- **连接长度加成**：
  - 3个方块：基础分
  - 4个方块：基础分x1.2
  - 5个方块：基础分x1.5
  - 6个方块：基础分x1.8
  - 7个及以上：基础分x2.0

### 7.2 特殊加成规则
- **连击加成**：
  - 第一次连击：无加成
  - 第二次连击：分数x1.1
  - 第三次连击：分数x1.2
  - 以此类推，最高至分数x2.0
- **特殊方块触发加成**：
  - 炸弹爆炸：额外50分
  - 彩虹方块效果：额外100分
  - 直线消除：额外75分
- **连锁反应加成**：
  - 每次连锁：基础分x(1+连锁次数x0.1)
  - 连锁反应超过5次：额外奖励200分

### 7.3 分数显示效果
- **实时分数显示**：
  - 位置：游戏界面顶部中央
  - 样式：清晰数字，重要节点有动画效果
- **得分动画**：
  - 消除处显示获得的分数
  - 分数上浮并消失
  - 特殊加成有特殊颜色标记
- **目标进度显示**：
  - 当前分数/目标分数的进度条
  - 达到一星、二星、三星目标时的视觉反馈

### 7.4 高分策略提示
- **新手引导**：
  - 提示玩家优先连接更多方块
  - 引导利用特殊方块获取高分
  - 说明连击和连锁反应的重要性
- **游戏技巧提示**：
  - 关卡开始时的策略提示
  - 失败后的改进建议
  - 高分攻略解锁（达到一定等级后）

## 8. 交互原型设计

### 8.1 主要交互流程
- **游戏启动流程**：
  - 启动画面 → 登录界面 → 主界面
  - 首次登录有新手引导
- **关卡选择流程**：
  - 主界面 → 关卡地图 → 关卡详情 → 游戏界面
  - 关卡解锁条件和奖励预览
- **游戏核心循环**：
  - 开始游戏 → 连接方块 → 消除得分 → 判断目标 → 结算
  - 失败时提供复活选项
  - 胜利时展示星级和奖励

### 8.2 手势控制设计
- **滑动连接**：
  - 按住并滑动手指连接相邻同色方块
  - 连接路径实时显示
  - 松开手指触发消除
- **点击操作**：
  - 点击道具激活道具模式
  - 点击能量槽触发能量爆发
  - 点击暂停按钮暂停游戏
- **双指操作**：
  - 双指捏合：缩小视图（适用于大型关卡）
  - 双指张开：放大视图
  - 双指滑动：移动视图

### 8.3 视觉反馈设计
- **触摸反馈**：
  - 触摸方块时的轻微放大效果
  - 有效连接时的连线效果
  - 无效操作时的轻微震动
- **游戏状态反馈**：
  - 剩余步数变化的动画效果
  - 目标完成时的庆祝动画
  - 危险状态提示（步数不足时）
- **成就解锁反馈**：
  - 屏幕顶部弹出成就通知
  - 解锁动画和音效
  - 奖励获取提示

### 8.4 音效设计
- **界面音效**：
  - 按钮点击音效
  - 界面切换音效
  - 弹窗出现/消失音效
- **游戏音效**：
  - 方块选中音效
  - 连接成功音效（随连接长度变化）
  - 消除音效（普通/特殊）
  - 连击音效（递增音调）
  - 能量爆发音效
- **背景音乐**：
  - 主界面轻快音乐
  - 游戏中节奏感音乐
  - 胜利/失败专属音乐

## 9. 游戏平衡性设计

### 9.1 难度曲线设计
- **初始阶段（1-20关）**：
  - 简单目标，充足步数
  - 逐步引入游戏机制
  - 失败率控制在10%以下
- **成长阶段（21-50关）**：
  - 多样化目标
  - 引入障碍物
  - 步数限制开始变得紧张
  - 失败率控制在30%左右
- **挑战阶段（51关以上）**：
  - 复杂目标组合
  - 大量障碍物
  - 严格的步数/时间限制
  - 需要策略性使用道具
  - 失败率可达50%

### 9.2 资源经济平衡
- **免费资源获取**：
  - 每日登录奖励
  - 关卡通关奖励
  - 成就系统奖励
  - 广告观看奖励
- **付费点设计**：
  - 道具购买
  - 金币/钻石充值
  - 皮肤/主题购买
  - 无广告特权
- **资源消耗点**：
  - 道具使用
  - 关卡重玩
  - 能量恢复
  - 特殊关卡解锁

### 9.3 游戏节奏控制
- **短期循环**：
  - 单关卡内的连接-消除-得分循环
  - 平均单关时长控制在2-3分钟
- **中期循环**：
  - 关卡解锁-挑战-奖励循环
  - 每组关卡（10关）有明显的难度变化
- **长期循环**：
  - 成就解锁-收集-炫耀循环
  - 季节性活动和限时挑战

### 9.4 数值平衡测试计划
- **内部测试指标**：
  - 关卡通过率
  - 平均尝试次数
  - 道具使用频率
  - 付费转化点
- **用户测试关注点**：
  - 游戏难度感知
  - 挫折感与成就感平衡
  - 付费意愿
  - 长期留存动力
- **数据收集与调整**：
  - 收集关卡热力图数据
  - 分析失败原因分布
  - 根据数据动态调整关卡参数
  - A/B测试不同难度设置
